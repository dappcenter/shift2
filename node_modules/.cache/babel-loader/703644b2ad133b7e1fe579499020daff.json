{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject;import React,{useState,useEffect}from'react';import styled from'styled-components';import{ButtonMenu,ButtonMenuItem}from'@pancakeswap-libs/uikit';import PastLotteryDataContext from'contexts/PastLotteryDataContext';import{getLotteryIssueIndex}from'utils/lotteryUtils';import useI18n from'hooks/useI18n';import{useLottery}from'hooks/useContract';import Page from'components/layout/Page';import Hero from'./components/Hero';import Divider from'./components/Divider';import NextDrawPage from'./NextDrawPage';import PastDrawsPage from'./PastDrawsPage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  margin-bottom: 32px;\\n\"])));var Lottery=function Lottery(){var lotteryContract=useLottery();var TranslateString=useI18n();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),activeIndex=_useState2[0],setActiveIndex=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),historyData=_useState4[0],setHistoryData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),historyError=_useState6[0],setHistoryError=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),currentLotteryNumber=_useState8[0],setCurrentLotteryNumber=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),mostRecentLotteryNumber=_useState10[0],setMostRecentLotteryNumber=_useState10[1];useEffect(function(){fetch(\"https://api.pancakeswap.com/api/lotteryHistory\").then(function(response){return response.json();}).then(function(data){return setHistoryData(data);}).catch(function(){setHistoryError(true);});},[]);useEffect(function(){var getInitialLotteryIndex=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var index,previousLotteryNumber;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getLotteryIssueIndex(lotteryContract);case 2:index=_context.sent;previousLotteryNumber=index-1;setCurrentLotteryNumber(index);setMostRecentLotteryNumber(previousLotteryNumber);case 6:case\"end\":return _context.stop();}}},_callee);}));return function getInitialLotteryIndex(){return _ref.apply(this,arguments);};}();if(lotteryContract){getInitialLotteryIndex();}},[lotteryContract]);var handleClick=function handleClick(index){setActiveIndex(index);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Hero,{}),/*#__PURE__*/_jsxs(Page,{children:[/*#__PURE__*/_jsx(Wrapper,{children:/*#__PURE__*/_jsxs(ButtonMenu,{activeIndex:activeIndex,onItemClick:handleClick,scale:\"sm\",variant:\"subtle\",children:[/*#__PURE__*/_jsx(ButtonMenuItem,{children:TranslateString(716,'Next draw')}),/*#__PURE__*/_jsx(ButtonMenuItem,{children:TranslateString(718,'Past draws')})]})}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(PastLotteryDataContext.Provider,{value:{historyError:historyError,historyData:historyData,mostRecentLotteryNumber:mostRecentLotteryNumber,currentLotteryNumber:currentLotteryNumber},children:activeIndex===0?/*#__PURE__*/_jsx(NextDrawPage,{}):/*#__PURE__*/_jsx(PastDrawsPage,{})})]})]});};export default Lottery;","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/views/Lottery/Lottery.tsx"],"names":["React","useState","useEffect","styled","ButtonMenu","ButtonMenuItem","PastLotteryDataContext","getLotteryIssueIndex","useI18n","useLottery","Page","Hero","Divider","NextDrawPage","PastDrawsPage","Wrapper","div","Lottery","lotteryContract","TranslateString","activeIndex","setActiveIndex","historyData","setHistoryData","historyError","setHistoryError","currentLotteryNumber","setCurrentLotteryNumber","mostRecentLotteryNumber","setMostRecentLotteryNumber","fetch","then","response","json","data","catch","getInitialLotteryIndex","index","previousLotteryNumber","handleClick"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { ButtonMenu, ButtonMenuItem } from '@pancakeswap-libs/uikit'\nimport PastLotteryDataContext from 'contexts/PastLotteryDataContext'\nimport { getLotteryIssueIndex } from 'utils/lotteryUtils'\nimport useI18n from 'hooks/useI18n'\nimport { useLottery } from 'hooks/useContract'\nimport Page from 'components/layout/Page'\nimport Hero from './components/Hero'\nimport Divider from './components/Divider'\nimport NextDrawPage from './NextDrawPage'\nimport PastDrawsPage from './PastDrawsPage'\n\nconst Wrapper = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 32px;\n`\n\nconst Lottery: React.FC = () => {\n  const lotteryContract = useLottery()\n  const TranslateString = useI18n()\n  const [activeIndex, setActiveIndex] = useState(0)\n  const [historyData, setHistoryData] = useState([])\n  const [historyError, setHistoryError] = useState(false)\n  const [currentLotteryNumber, setCurrentLotteryNumber] = useState(0)\n  const [mostRecentLotteryNumber, setMostRecentLotteryNumber] = useState(1)\n\n  useEffect(() => {\n    fetch(`https://api.pancakeswap.com/api/lotteryHistory`)\n      .then((response) => response.json())\n      .then((data) => setHistoryData(data))\n      .catch(() => {\n        setHistoryError(true)\n      })\n  }, [])\n\n  useEffect(() => {\n    const getInitialLotteryIndex = async () => {\n      const index = await getLotteryIssueIndex(lotteryContract)\n      const previousLotteryNumber = index - 1\n\n      setCurrentLotteryNumber(index)\n      setMostRecentLotteryNumber(previousLotteryNumber)\n    }\n\n    if (lotteryContract) {\n      getInitialLotteryIndex()\n    }\n  }, [lotteryContract])\n\n  const handleClick = (index) => {\n    setActiveIndex(index)\n  }\n\n  return (\n    <>\n      <Hero />\n      <Page>\n        <Wrapper>\n          <ButtonMenu activeIndex={activeIndex} onItemClick={handleClick} scale=\"sm\" variant=\"subtle\">\n            <ButtonMenuItem>{TranslateString(716, 'Next draw')}</ButtonMenuItem>\n            <ButtonMenuItem>{TranslateString(718, 'Past draws')}</ButtonMenuItem>\n          </ButtonMenu>\n        </Wrapper>\n        <Divider />\n        <PastLotteryDataContext.Provider\n          value={{ historyError, historyData, mostRecentLotteryNumber, currentLotteryNumber }}\n        >\n          {activeIndex === 0 ? <NextDrawPage /> : <PastDrawsPage />}\n        </PastLotteryDataContext.Provider>\n      </Page>\n    </>\n  )\n}\n\nexport default Lottery\n"]},"metadata":{},"sourceType":"module"}