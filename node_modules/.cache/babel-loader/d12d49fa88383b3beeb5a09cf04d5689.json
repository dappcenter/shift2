{"ast":null,"code":"/* eslint-disable no-param-reassign */\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  isLoading: false,\n  lastUpdated: null,\n  data: null\n}; // Thunks\n\nexport const fetchPrices = createAsyncThunk('prices/fetch', async () => {\n  const response = await fetch('https://api.pancakeswap.info/api/v2/tokens');\n  const data = await response.json();\n  console.log(' ** SUCK IT****  '); // Return normalized token names\n\n  return {\n    update_at: data.update_at,\n    prices: Object.keys(data.prices).reduce((accum, token) => {\n      return { ...accum,\n        [token.toLowerCase()]: data.prices[token]\n      };\n    }, {})\n  };\n});\nexport const pricesSlice = createSlice({\n  name: 'prices',\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchPrices.pending, state => {\n      state.isLoading = true;\n    });\n    builder.addCase(fetchPrices.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.lastUpdated = action.payload.update_at;\n      state.data = action.payload.prices;\n    });\n  }\n});\nexport default pricesSlice.reducer;","map":{"version":3,"sources":["/Users/rp/Desktop/shift2/src/state/prices/index.ts"],"names":["createAsyncThunk","createSlice","initialState","isLoading","lastUpdated","data","fetchPrices","response","fetch","json","console","log","update_at","prices","Object","keys","reduce","accum","token","toLowerCase","pricesSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","reducer"],"mappings":"AAAA;AACA,SAASA,gBAAT,EAA2BC,WAA3B,QAA6D,kBAA7D;AAGA,MAAMC,YAAwB,GAAG;AAC/BC,EAAAA,SAAS,EAAE,KADoB;AAE/BC,EAAAA,WAAW,EAAE,IAFkB;AAG/BC,EAAAA,IAAI,EAAE;AAHyB,CAAjC,C,CAMA;;AACA,OAAO,MAAMC,WAAW,GAAGN,gBAAgB,CAAmB,cAAnB,EAAmC,YAAY;AACxF,QAAMO,QAAQ,GAAG,MAAMC,KAAK,CAAC,4CAAD,CAA5B;AACA,QAAMH,IAAI,GAAI,MAAME,QAAQ,CAACE,IAAT,EAApB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAHwF,CAIxF;;AACA,SAAO;AACLC,IAAAA,SAAS,EAAEP,IAAI,CAACO,SADX;AAELC,IAAAA,MAAM,EAAEC,MAAM,CAACC,IAAP,CAAYV,IAAI,CAACQ,MAAjB,EAAyBG,MAAzB,CAAgC,CAACC,KAAD,EAAQC,KAAR,KAAkB;AACxD,aAAO,EACL,GAAGD,KADE;AAEL,SAACC,KAAK,CAACC,WAAN,EAAD,GAAuBd,IAAI,CAACQ,MAAL,CAAYK,KAAZ;AAFlB,OAAP;AAID,KALO,EAKL,EALK;AAFH,GAAP;AASD,CAd0C,CAApC;AAgBP,OAAO,MAAME,WAAW,GAAGnB,WAAW,CAAC;AACrCoB,EAAAA,IAAI,EAAE,QAD+B;AAErCnB,EAAAA,YAFqC;AAGrCoB,EAAAA,QAAQ,EAAE,EAH2B;AAIrCC,EAAAA,aAAa,EAAGC,OAAD,IAAa;AAC1BA,IAAAA,OAAO,CAACC,OAAR,CAAgBnB,WAAW,CAACoB,OAA5B,EAAsCC,KAAD,IAAW;AAC9CA,MAAAA,KAAK,CAACxB,SAAN,GAAkB,IAAlB;AACD,KAFD;AAGAqB,IAAAA,OAAO,CAACC,OAAR,CAAgBnB,WAAW,CAACsB,SAA5B,EAAuC,CAACD,KAAD,EAAQE,MAAR,KAAoD;AACzFF,MAAAA,KAAK,CAACxB,SAAN,GAAkB,KAAlB;AACAwB,MAAAA,KAAK,CAACvB,WAAN,GAAoByB,MAAM,CAACC,OAAP,CAAelB,SAAnC;AACAe,MAAAA,KAAK,CAACtB,IAAN,GAAawB,MAAM,CAACC,OAAP,CAAejB,MAA5B;AACD,KAJD;AAKD;AAboC,CAAD,CAA/B;AAgBP,eAAeO,WAAW,CAACW,OAA3B","sourcesContent":["/* eslint-disable no-param-reassign */\nimport { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit'\nimport { PriceApiResponse, PriceState } from 'state/types'\n\nconst initialState: PriceState = {\n  isLoading: false,\n  lastUpdated: null,\n  data: null,\n}\n\n// Thunks\nexport const fetchPrices = createAsyncThunk<PriceApiResponse>('prices/fetch', async () => {\n  const response = await fetch('https://api.pancakeswap.info/api/v2/tokens')\n  const data = (await response.json()) as PriceApiResponse\n  console.log(' ** SUCK IT****  ')\n  // Return normalized token names\n  return {\n    update_at: data.update_at,\n    prices: Object.keys(data.prices).reduce((accum, token) => {\n      return {\n        ...accum,\n        [token.toLowerCase()]: data.prices[token],\n      }\n    }, {}),\n  }\n})\n\nexport const pricesSlice = createSlice({\n  name: 'prices',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetchPrices.pending, (state) => {\n      state.isLoading = true\n    })\n    builder.addCase(fetchPrices.fulfilled, (state, action: PayloadAction<PriceApiResponse>) => {\n      state.isLoading = false\n      state.lastUpdated = action.payload.update_at\n      state.data = action.payload.prices\n    })\n  },\n})\n\nexport default pricesSlice.reducer\n"]},"metadata":{},"sourceType":"module"}