{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/* eslint-disable no-await-in-loop */import BigNumber from'bignumber.js';import{Interface}from'@ethersproject/abi';import{getWeb3NoAccount}from'utils/web3';import MultiCallAbi from'config/abi/Multicall.json';import ticketAbi from'config/abi/lotteryNft.json';import lotteryAbi from'config/abi/lottery.json';import{LOTTERY_TICKET_PRICE}from'config';import{getMulticallAddress}from'./addressHelpers';export var multiCall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(abi,calls){var web3,multi,itf,res,i,_loop,calldata,_yield$multi$methods$2,returnData;return _regeneratorRuntime.wrap(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:web3=getWeb3NoAccount();multi=new web3.eth.Contract(MultiCallAbi,getMulticallAddress());itf=new Interface(abi);res=[];if(!(calls.length>100)){_context2.next=13;break;}i=0;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(){var newCalls,calldata,_yield$multi$methods$,returnData;return _regeneratorRuntime.wrap(function _loop$(_context){while(1){switch(_context.prev=_context.next){case 0:newCalls=calls.slice(i*100,100*(i+1));calldata=newCalls.map(function(call){return[call[0].toLowerCase(),itf.encodeFunctionData(call[1],call[2])];});_context.next=4;return multi.methods.aggregate(calldata).call();case 4:_yield$multi$methods$=_context.sent;returnData=_yield$multi$methods$.returnData;i++;res=res.concat(returnData.map(function(call,index){return itf.decodeFunctionResult(newCalls[index][1],call);}));case 8:case\"end\":return _context.stop();}}},_loop);});case 7:if(!(i<calls.length/100)){_context2.next=11;break;}return _context2.delegateYield(_loop(),\"t0\",9);case 9:_context2.next=7;break;case 11:_context2.next=19;break;case 13:calldata=calls.map(function(call){return[call[0].toLowerCase(),itf.encodeFunctionData(call[1],call[2])];});_context2.next=16;return multi.methods.aggregate(calldata).call();case 16:_yield$multi$methods$2=_context2.sent;returnData=_yield$multi$methods$2.returnData;res=returnData.map(function(call,i){return itf.decodeFunctionResult(calls[i][1],call);});case 19:return _context2.abrupt(\"return\",res);case 20:case\"end\":return _context2.stop();}}},_callee);}));return function multiCall(_x,_x2){return _ref.apply(this,arguments);};}();export var multiBuy=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(lotteryContract,price,numbersList,account){return _regeneratorRuntime.wrap(function _callee2$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;return _context3.abrupt(\"return\",lotteryContract.methods.multiBuy(new BigNumber(price).times(new BigNumber(10).pow(18)).toString(),numbersList).send({from:account}).on('transactionHash',function(tx){return tx.transactionHash;}));case 4:_context3.prev=4;_context3.t0=_context3[\"catch\"](0);return _context3.abrupt(\"return\",console.error(_context3.t0));case 7:case\"end\":return _context3.stop();}}},_callee2,null,[[0,4]]);}));return function multiBuy(_x3,_x4,_x5,_x6){return _ref2.apply(this,arguments);};}();export var getTickets=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(lotteryContract,ticketsContract,account,customLotteryNum){var issueIndex,length,calls1,res,tokenIds,calls2,ticketIssues,finalTokenids,calls3,tickets;return _regeneratorRuntime.wrap(function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.t0=customLotteryNum;if(_context5.t0){_context5.next=5;break;}_context5.next=4;return lotteryContract.methods.issueIndex().call();case 4:_context5.t0=_context5.sent;case 5:issueIndex=_context5.t0;_context5.next=8;return getTicketsAmount(ticketsContract,account);case 8:length=_context5.sent;// eslint-disable-next-line prefer-spread\ncalls1=Array.apply(null,{length:length}).map(function(a,i){return[ticketsContract.options.address,'tokenOfOwnerByIndex',[account,i]];});_context5.next=12;return multiCall(ticketAbi,calls1);case 12:res=_context5.sent;tokenIds=res.map(function(id){return id.toString();});calls2=tokenIds.map(function(id){return[ticketsContract.options.address,'getLotteryIssueIndex',[id]];});_context5.next=17;return multiCall(ticketAbi,calls2);case 17:ticketIssues=_context5.sent;finalTokenids=[];ticketIssues.forEach(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(ticketIssue,i){return _regeneratorRuntime.wrap(function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(new BigNumber(ticketIssue).eq(issueIndex)){finalTokenids.push(tokenIds[i]);}case 1:case\"end\":return _context4.stop();}}},_callee3);}));return function(_x11,_x12){return _ref4.apply(this,arguments);};}());calls3=finalTokenids.map(function(id){return[ticketsContract.options.address,'getLotteryNumbers',[id]];});_context5.next=23;return multiCall(ticketAbi,calls3);case 23:tickets=_context5.sent;_context5.next=26;return getLotteryStatus(lotteryContract);case 26:return _context5.abrupt(\"return\",tickets);case 27:case\"end\":return _context5.stop();}}},_callee4);}));return function getTickets(_x7,_x8,_x9,_x10){return _ref3.apply(this,arguments);};}();export var getTicketsAmount=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(ticketsContract,account){return _regeneratorRuntime.wrap(function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.abrupt(\"return\",ticketsContract.methods.balanceOf(account).call());case 1:case\"end\":return _context6.stop();}}},_callee5);}));return function getTicketsAmount(_x13,_x14){return _ref5.apply(this,arguments);};}();export var multiClaim=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(lotteryContract,ticketsContract,account){var length,calls1,res,tokenIds,calls2,claimedStatus,unClaimedIds,calls3,rewards,finanltokenIds;return _regeneratorRuntime.wrap(function _callee6$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return lotteryContract.methods.issueIndex().call();case 2:_context7.next=4;return getTicketsAmount(ticketsContract,account);case 4:length=_context7.sent;// eslint-disable-next-line prefer-spread\ncalls1=Array.apply(null,{length:length}).map(function(a,i){return[ticketsContract.options.address,'tokenOfOwnerByIndex',[account,i]];});_context7.next=8;return multiCall(ticketAbi,calls1);case 8:res=_context7.sent;tokenIds=res.map(function(id){return id.toString();});calls2=tokenIds.map(function(id){return[ticketsContract.options.address,'getClaimStatus',[id]];});_context7.next=13;return multiCall(ticketAbi,calls2);case 13:claimedStatus=_context7.sent;unClaimedIds=tokenIds.filter(function(id,index){return!claimedStatus[index][0];});calls3=unClaimedIds.map(function(id){return[lotteryContract.options.address,'getRewardView',[id]];});_context7.next=18;return multiCall(lotteryAbi,calls3);case 18:rewards=_context7.sent;finanltokenIds=[];rewards.forEach(function(r,i){if(r>0){finanltokenIds.push(unClaimedIds[i]);}});if(finanltokenIds.length>200){finanltokenIds=finanltokenIds.slice(0,200);}_context7.prev=22;return _context7.abrupt(\"return\",lotteryContract.methods.multiClaim(finanltokenIds).send({from:account}).on('transactionHash',function(tx){return tx.transactionHash;}));case 26:_context7.prev=26;_context7.t0=_context7[\"catch\"](22);return _context7.abrupt(\"return\",console.error(_context7.t0));case 29:case\"end\":return _context7.stop();}}},_callee6,null,[[22,26]]);}));return function multiClaim(_x15,_x16,_x17){return _ref6.apply(this,arguments);};}();export var getTotalClaim=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(lotteryContract,ticketsContract,account){var issueIndex,length,calls1,res,tokenIds,calls2,ticketIssues,calls3,claimedStatus,drawed,finalTokenids,calls4,rewards,claim;return _regeneratorRuntime.wrap(function _callee8$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return lotteryContract.methods.issueIndex().call();case 3:issueIndex=_context9.sent;_context9.next=6;return getTicketsAmount(ticketsContract,account);case 6:length=_context9.sent;// eslint-disable-next-line prefer-spread\ncalls1=Array.apply(null,{length:length}).map(function(a,i){return[ticketsContract.options.address,'tokenOfOwnerByIndex',[account,i]];});_context9.next=10;return multiCall(ticketAbi,calls1);case 10:res=_context9.sent;tokenIds=res.map(function(id){return id.toString();});calls2=tokenIds.map(function(id){return[ticketsContract.options.address,'getLotteryIssueIndex',[id]];});_context9.next=15;return multiCall(ticketAbi,calls2);case 15:ticketIssues=_context9.sent;calls3=tokenIds.map(function(id){return[ticketsContract.options.address,'getClaimStatus',[id]];});_context9.next=19;return multiCall(ticketAbi,calls3);case 19:claimedStatus=_context9.sent;_context9.next=22;return getLotteryStatus(lotteryContract);case 22:drawed=_context9.sent;finalTokenids=[];ticketIssues.forEach(/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(ticketIssue,i){return _regeneratorRuntime.wrap(function _callee7$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:// eslint-disable-next-line no-empty\nif(!drawed&&ticketIssue.toString()===issueIndex){}else if(!claimedStatus[i][0]){finalTokenids.push(tokenIds[i]);}case 1:case\"end\":return _context8.stop();}}},_callee7);}));return function(_x21,_x22){return _ref8.apply(this,arguments);};}());calls4=finalTokenids.map(function(id){return[lotteryContract.options.address,'getRewardView',[id]];});_context9.next=28;return multiCall(lotteryAbi,calls4);case 28:rewards=_context9.sent;claim=rewards.reduce(function(p,c){return BigNumber.sum(p,c);},new BigNumber(0));return _context9.abrupt(\"return\",claim);case 33:_context9.prev=33;_context9.t0=_context9[\"catch\"](0);console.error(_context9.t0);case 36:return _context9.abrupt(\"return\",new BigNumber(0));case 37:case\"end\":return _context9.stop();}}},_callee8,null,[[0,33]]);}));return function getTotalClaim(_x18,_x19,_x20){return _ref7.apply(this,arguments);};}();export var getTotalRewards=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(lotteryContract){var issueIndex;return _regeneratorRuntime.wrap(function _callee9$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return lotteryContract.methods.issueIndex().call();case 2:issueIndex=_context10.sent;return _context10.abrupt(\"return\",lotteryContract.methods.getTotalRewards(issueIndex).call());case 4:case\"end\":return _context10.stop();}}},_callee9);}));return function getTotalRewards(_x23){return _ref9.apply(this,arguments);};}();export var getMax=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(lotteryContract){return _regeneratorRuntime.wrap(function _callee10$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:return _context11.abrupt(\"return\",lotteryContract.methods.maxNumber().call());case 1:case\"end\":return _context11.stop();}}},_callee10);}));return function getMax(_x24){return _ref10.apply(this,arguments);};}();export var getLotteryIssueIndex=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(lotteryContract){var issueIndex;return _regeneratorRuntime.wrap(function _callee11$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.next=2;return lotteryContract.methods.issueIndex().call();case 2:issueIndex=_context12.sent;return _context12.abrupt(\"return\",issueIndex);case 4:case\"end\":return _context12.stop();}}},_callee11);}));return function getLotteryIssueIndex(_x25){return _ref11.apply(this,arguments);};}();export var getLotteryStatus=/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee12(lotteryContract){return _regeneratorRuntime.wrap(function _callee12$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.abrupt(\"return\",lotteryContract.methods.drawed().call());case 1:case\"end\":return _context13.stop();}}},_callee12);}));return function getLotteryStatus(_x26){return _ref12.apply(this,arguments);};}();export var getMatchingRewardLength=/*#__PURE__*/function(){var _ref13=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee13(lotteryContract,matchNumber){var issueIndex,drawed,amount;return _regeneratorRuntime.wrap(function _callee13$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return lotteryContract.methods.issueIndex().call();case 2:issueIndex=_context14.sent;_context14.next=5;return lotteryContract.methods.drawed().call();case 5:drawed=_context14.sent;if(!drawed){issueIndex-=1;}_context14.prev=7;_context14.next=10;return lotteryContract.methods.historyAmount(issueIndex,5-matchNumber).call();case 10:amount=_context14.sent;return _context14.abrupt(\"return\",amount/1e18/LOTTERY_TICKET_PRICE);case 14:_context14.prev=14;_context14.t0=_context14[\"catch\"](7);console.error(_context14.t0);case 17:return _context14.abrupt(\"return\",0);case 18:case\"end\":return _context14.stop();}}},_callee13,null,[[7,14]]);}));return function getMatchingRewardLength(_x27,_x28){return _ref13.apply(this,arguments);};}();export var getWinningNumbers=/*#__PURE__*/function(){var _ref14=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee14(lotteryContract){var issueIndex,numbers,drawed,i,_i;return _regeneratorRuntime.wrap(function _callee14$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:_context15.next=2;return lotteryContract.methods.issueIndex().call();case 2:issueIndex=_context15.sent;numbers=[];_context15.next=6;return lotteryContract.methods.drawed().call();case 6:drawed=_context15.sent;if(!(!drawed&&parseInt(issueIndex,10)===0)){_context15.next=9;break;}return _context15.abrupt(\"return\",[0,0,0,0]);case 9:if(drawed){_context15.next=22;break;}i=0;case 11:if(!(i<4)){_context15.next=20;break;}_context15.t0=numbers;_context15.next=15;return lotteryContract.methods.historyNumbers(issueIndex-1,i).call();case 15:_context15.t1=+_context15.sent.toString();_context15.t0.push.call(_context15.t0,_context15.t1);case 17:i++;_context15.next=11;break;case 20:_context15.next=32;break;case 22:_i=0;case 23:if(!(_i<4)){_context15.next=32;break;}_context15.t2=numbers;_context15.next=27;return lotteryContract.methods.winningNumbers(_i).call();case 27:_context15.t3=+_context15.sent.toString();_context15.t2.push.call(_context15.t2,_context15.t3);case 29:_i++;_context15.next=23;break;case 32:return _context15.abrupt(\"return\",numbers);case 33:case\"end\":return _context15.stop();}}},_callee14);}));return function getWinningNumbers(_x29){return _ref14.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/utils/lotteryUtils.ts"],"names":["BigNumber","Interface","getWeb3NoAccount","MultiCallAbi","ticketAbi","lotteryAbi","LOTTERY_TICKET_PRICE","getMulticallAddress","multiCall","abi","calls","web3","multi","eth","Contract","itf","res","length","i","newCalls","slice","calldata","map","call","toLowerCase","encodeFunctionData","methods","aggregate","returnData","concat","index","decodeFunctionResult","multiBuy","lotteryContract","price","numbersList","account","times","pow","toString","send","from","on","tx","transactionHash","console","error","getTickets","ticketsContract","customLotteryNum","issueIndex","getTicketsAmount","calls1","Array","apply","a","options","address","tokenIds","id","calls2","ticketIssues","finalTokenids","forEach","ticketIssue","eq","push","calls3","tickets","getLotteryStatus","balanceOf","multiClaim","claimedStatus","unClaimedIds","filter","rewards","finanltokenIds","r","getTotalClaim","drawed","calls4","claim","reduce","p","c","sum","getTotalRewards","getMax","maxNumber","getLotteryIssueIndex","getMatchingRewardLength","matchNumber","historyAmount","amount","getWinningNumbers","numbers","parseInt","historyNumbers","winningNumbers"],"mappings":"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","sourcesContent":["/* eslint-disable no-await-in-loop */\nimport BigNumber from 'bignumber.js'\nimport { Interface } from '@ethersproject/abi'\nimport { getWeb3NoAccount } from 'utils/web3'\nimport MultiCallAbi from 'config/abi/Multicall.json'\nimport ticketAbi from 'config/abi/lotteryNft.json'\nimport lotteryAbi from 'config/abi/lottery.json'\nimport { LOTTERY_TICKET_PRICE } from 'config'\nimport { AbiItem } from 'web3-utils'\nimport { getMulticallAddress } from './addressHelpers'\n\nexport const multiCall = async (abi, calls) => {\n  const web3 = getWeb3NoAccount()\n  const multi = new web3.eth.Contract((MultiCallAbi as unknown) as AbiItem, getMulticallAddress())\n  const itf = new Interface(abi)\n  let res = []\n  if (calls.length > 100) {\n    let i = 0\n    while (i < calls.length / 100) {\n      const newCalls = calls.slice(i * 100, 100 * (i + 1))\n      const calldata = newCalls.map((call) => [call[0].toLowerCase(), itf.encodeFunctionData(call[1], call[2])])\n      const { returnData } = await multi.methods.aggregate(calldata).call()\n      i++\n      res = res.concat(returnData.map((call, index) => itf.decodeFunctionResult(newCalls[index][1], call)))\n    }\n  } else {\n    const calldata = calls.map((call) => [call[0].toLowerCase(), itf.encodeFunctionData(call[1], call[2])])\n    const { returnData } = await multi.methods.aggregate(calldata).call()\n    res = returnData.map((call, i) => itf.decodeFunctionResult(calls[i][1], call))\n  }\n  return res\n}\n\nexport const multiBuy = async (lotteryContract, price, numbersList, account) => {\n  try {\n    return lotteryContract.methods\n      .multiBuy(new BigNumber(price).times(new BigNumber(10).pow(18)).toString(), numbersList)\n      .send({ from: account })\n      .on('transactionHash', (tx) => {\n        return tx.transactionHash\n      })\n  } catch (err) {\n    return console.error(err)\n  }\n}\n\nexport const getTickets = async (lotteryContract, ticketsContract, account, customLotteryNum) => {\n  const issueIndex = customLotteryNum || (await lotteryContract.methods.issueIndex().call())\n  const length = await getTicketsAmount(ticketsContract, account)\n\n  // eslint-disable-next-line prefer-spread\n  const calls1 = Array.apply(null, { length } as unknown[]).map((a, i) => [\n    ticketsContract.options.address,\n    'tokenOfOwnerByIndex',\n    [account, i],\n  ])\n  const res = await multiCall(ticketAbi, calls1)\n\n  const tokenIds = res.map((id) => id.toString())\n\n  const calls2 = tokenIds.map((id) => [ticketsContract.options.address, 'getLotteryIssueIndex', [id]])\n  const ticketIssues = await multiCall(ticketAbi, calls2)\n\n  const finalTokenids = []\n  ticketIssues.forEach(async (ticketIssue, i) => {\n    if (new BigNumber(ticketIssue).eq(issueIndex)) {\n      finalTokenids.push(tokenIds[i])\n    }\n  })\n  const calls3 = finalTokenids.map((id) => [ticketsContract.options.address, 'getLotteryNumbers', [id]])\n  const tickets = await multiCall(ticketAbi, calls3)\n\n  await getLotteryStatus(lotteryContract)\n  return tickets\n}\n\nexport const getTicketsAmount = async (ticketsContract, account) => {\n  return ticketsContract.methods.balanceOf(account).call()\n}\n\nexport const multiClaim = async (lotteryContract, ticketsContract, account) => {\n  await lotteryContract.methods.issueIndex().call()\n  const length = await getTicketsAmount(ticketsContract, account)\n  // eslint-disable-next-line prefer-spread\n  const calls1 = Array.apply(null, { length } as unknown[]).map((a, i) => [\n    ticketsContract.options.address,\n    'tokenOfOwnerByIndex',\n    [account, i],\n  ])\n  const res = await multiCall(ticketAbi, calls1)\n  const tokenIds = res.map((id) => id.toString())\n\n  const calls2 = tokenIds.map((id) => [ticketsContract.options.address, 'getClaimStatus', [id]])\n  const claimedStatus = await multiCall(ticketAbi, calls2)\n\n  const unClaimedIds = tokenIds.filter((id, index) => !claimedStatus[index][0])\n\n  const calls3 = unClaimedIds.map((id) => [lotteryContract.options.address, 'getRewardView', [id]])\n  const rewards = await multiCall(lotteryAbi, calls3)\n\n  let finanltokenIds = []\n  rewards.forEach((r, i) => {\n    if (r > 0) {\n      finanltokenIds.push(unClaimedIds[i])\n    }\n  })\n\n  if (finanltokenIds.length > 200) {\n    finanltokenIds = finanltokenIds.slice(0, 200)\n  }\n\n  try {\n    return lotteryContract.methods\n      .multiClaim(finanltokenIds)\n      .send({ from: account })\n      .on('transactionHash', (tx) => {\n        return tx.transactionHash\n      })\n  } catch (err) {\n    return console.error(err)\n  }\n}\n\nexport const getTotalClaim = async (lotteryContract, ticketsContract, account) => {\n  try {\n    const issueIndex = await lotteryContract.methods.issueIndex().call()\n    const length = await getTicketsAmount(ticketsContract, account)\n    // eslint-disable-next-line prefer-spread\n    const calls1 = Array.apply(null, { length } as unknown[]).map((a, i) => [\n      ticketsContract.options.address,\n      'tokenOfOwnerByIndex',\n      [account, i],\n    ])\n    const res = await multiCall(ticketAbi, calls1)\n    const tokenIds = res.map((id) => id.toString())\n    const calls2 = tokenIds.map((id) => [ticketsContract.options.address, 'getLotteryIssueIndex', [id]])\n    const ticketIssues = await multiCall(ticketAbi, calls2)\n    const calls3 = tokenIds.map((id) => [ticketsContract.options.address, 'getClaimStatus', [id]])\n    const claimedStatus = await multiCall(ticketAbi, calls3)\n\n    const drawed = await getLotteryStatus(lotteryContract)\n\n    const finalTokenids = []\n    ticketIssues.forEach(async (ticketIssue, i) => {\n      // eslint-disable-next-line no-empty\n      if (!drawed && ticketIssue.toString() === issueIndex) {\n      } else if (!claimedStatus[i][0]) {\n        finalTokenids.push(tokenIds[i])\n      }\n    })\n\n    const calls4 = finalTokenids.map((id) => [lotteryContract.options.address, 'getRewardView', [id]])\n\n    const rewards = await multiCall(lotteryAbi, calls4)\n    const claim = rewards.reduce((p, c) => BigNumber.sum(p, c), new BigNumber(0))\n\n    return claim\n  } catch (err) {\n    console.error(err)\n  }\n  return new BigNumber(0)\n}\n\nexport const getTotalRewards = async (lotteryContract) => {\n  const issueIndex = await lotteryContract.methods.issueIndex().call()\n  return lotteryContract.methods.getTotalRewards(issueIndex).call()\n}\n\nexport const getMax = async (lotteryContract) => {\n  return lotteryContract.methods.maxNumber().call()\n}\n\nexport const getLotteryIssueIndex = async (lotteryContract) => {\n  const issueIndex = await lotteryContract.methods.issueIndex().call()\n  return issueIndex\n}\n\nexport const getLotteryStatus = async (lotteryContract) => {\n  return lotteryContract.methods.drawed().call()\n}\n\nexport const getMatchingRewardLength = async (lotteryContract, matchNumber) => {\n  let issueIndex = await lotteryContract.methods.issueIndex().call()\n  const drawed = await lotteryContract.methods.drawed().call()\n  if (!drawed) {\n    issueIndex -= 1\n  }\n  try {\n    const amount = await lotteryContract.methods.historyAmount(issueIndex, 5 - matchNumber).call()\n    return amount / 1e18 / LOTTERY_TICKET_PRICE\n  } catch (err) {\n    console.error(err)\n  }\n  return 0\n}\n\nexport const getWinningNumbers = async (lotteryContract) => {\n  const issueIndex = await lotteryContract.methods.issueIndex().call()\n  const numbers = []\n  const drawed = await lotteryContract.methods.drawed().call()\n\n  if (!drawed && parseInt(issueIndex, 10) === 0) {\n    return [0, 0, 0, 0]\n  }\n  if (!drawed) {\n    for (let i = 0; i < 4; i++) {\n      numbers.push(+(await lotteryContract.methods.historyNumbers(issueIndex - 1, i).call()).toString())\n    }\n  } else {\n    for (let i = 0; i < 4; i++) {\n      numbers.push(+(await lotteryContract.methods.winningNumbers(i).call()).toString())\n    }\n  }\n  return numbers\n}\n"]},"metadata":{},"sourceType":"module"}