{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useState,useEffect}from'react';import{useWeb3React}from'@web3-react/core';import BigNumber from'bignumber.js';import{useLottery,useLotteryTicket}from'hooks/useContract';import useRefresh from'./useRefresh';import{getTotalRewards,getTotalClaim,getMatchingRewardLength,getWinningNumbers,getTickets}from'../utils/lotteryUtils';var useTickets=function useTickets(){var lotteryNumber=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tickets=_useState2[0],setTickets=_useState2[1];var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var ticketsContract=useLotteryTicket();var lotteryContract=useLottery();var _useRefresh=useRefresh(),fastRefresh=_useRefresh.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getTickets(lotteryContract,ticketsContract,account,lotteryNumber);case 2:res=_context.sent;setTickets(res);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchBalance(){return _ref.apply(this,arguments);};}();if(account&&lotteryContract&&ticketsContract){fetchBalance();}},[account,lotteryContract,ticketsContract,fastRefresh,lotteryNumber]);return tickets;};export var useTotalRewards=function useTotalRewards(){var _useState3=useState(new BigNumber(0)),_useState4=_slicedToArray(_useState3,2),rewards=_useState4[0],setRewards=_useState4[1];var lotteryContract=useLottery();var _useRefresh2=useRefresh(),fastRefresh=_useRefresh2.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getTotalRewards(lotteryContract);case 2:res=_context2.sent;setRewards(new BigNumber(res));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchBalance(){return _ref2.apply(this,arguments);};}();if(lotteryContract){fetchBalance();}},[lotteryContract,fastRefresh]);return rewards;};export var useTotalClaim=function useTotalClaim(){var _useState5=useState(new BigNumber(0)),_useState6=_slicedToArray(_useState5,2),claimAmount=_useState6[0],setClaimAmount=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),claimLoading=_useState8[0],setClaimLoading=_useState8[1];var _useWeb3React2=useWeb3React(),account=_useWeb3React2.account;var ticketsContract=useLotteryTicket();var lotteryContract=useLottery();var fetchBalance=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var claim;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setClaimLoading(true);_context3.next=3;return getTotalClaim(lotteryContract,ticketsContract,account);case 3:claim=_context3.sent;setClaimAmount(claim);setClaimLoading(false);case 6:case\"end\":return _context3.stop();}}},_callee3);})),[account,lotteryContract,ticketsContract]);useEffect(function(){if(account&&lotteryContract&&ticketsContract){fetchBalance();}},[account,fetchBalance,lotteryContract,ticketsContract]);return{claimLoading:claimLoading,claimAmount:claimAmount};};export var useWinningNumbers=function useWinningNumbers(){var _useState9=useState([0,0,0,0]),_useState10=_slicedToArray(_useState9,2),winngNumbers=_useState10[0],setWinningNumbers=_useState10[1];var lotteryContract=useLottery();var _useRefresh3=useRefresh(),fastRefresh=_useRefresh3.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var rewards;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return getWinningNumbers(lotteryContract);case 2:rewards=_context4.sent;setWinningNumbers(rewards);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchBalance(){return _ref4.apply(this,arguments);};}();if(lotteryContract){fetchBalance();}},[fastRefresh,lotteryContract,setWinningNumbers]);return winngNumbers;};export var useMatchingRewardLength=function useMatchingRewardLength(numbers){var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),matchingNumbers=_useState12[0],setMatchingNumbers=_useState12[1];var lotteryContract=useLottery();var _useRefresh4=useRefresh(),fastRefresh=_useRefresh4.fastRefresh;useEffect(function(){var fetchBalance=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var matchedNumbaers;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return getMatchingRewardLength(lotteryContract,numbers);case 2:matchedNumbaers=_context5.sent;setMatchingNumbers(matchedNumbaers);case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function fetchBalance(){return _ref5.apply(this,arguments);};}();if(lotteryContract){fetchBalance();}},[lotteryContract,numbers,fastRefresh]);return matchingNumbers;};export default useTickets;","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/hooks/useTickets.ts"],"names":["useCallback","useState","useEffect","useWeb3React","BigNumber","useLottery","useLotteryTicket","useRefresh","getTotalRewards","getTotalClaim","getMatchingRewardLength","getWinningNumbers","getTickets","useTickets","lotteryNumber","tickets","setTickets","account","ticketsContract","lotteryContract","fastRefresh","fetchBalance","res","useTotalRewards","rewards","setRewards","useTotalClaim","claimAmount","setClaimAmount","claimLoading","setClaimLoading","claim","useWinningNumbers","winngNumbers","setWinningNumbers","useMatchingRewardLength","numbers","matchingNumbers","setMatchingNumbers","matchedNumbaers"],"mappings":"ogBAAA,OAASA,WAAT,CAAsBC,QAAtB,CAAgCC,SAAhC,KAAiD,OAAjD,CACA,OAASC,YAAT,KAA6B,kBAA7B,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,OAASC,UAAT,CAAqBC,gBAArB,KAA6C,mBAA7C,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,OACEC,eADF,CAEEC,aAFF,CAGEC,uBAHF,CAIEC,iBAJF,CAKEC,UALF,KAMO,uBANP,CAQA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAA0B,IAAzBC,CAAAA,aAAyB,2DAAT,IAAS,eACbb,QAAQ,CAAC,EAAD,CADK,wCACpCc,OADoC,eAC3BC,UAD2B,iCAEvBb,YAAY,EAFW,CAEnCc,OAFmC,eAEnCA,OAFmC,CAG3C,GAAMC,CAAAA,eAAe,CAAGZ,gBAAgB,EAAxC,CACA,GAAMa,CAAAA,eAAe,CAAGd,UAAU,EAAlC,CAJ2C,gBAKnBE,UAAU,EALS,CAKnCa,WALmC,aAKnCA,WALmC,CAO3ClB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,YAAY,0FAAG,iKACDT,CAAAA,UAAU,CAACO,eAAD,CAAkBD,eAAlB,CAAmCD,OAAnC,CAA4CH,aAA5C,CADT,QACbQ,GADa,eAEnBN,UAAU,CAACM,GAAD,CAAV,CAFmB,sDAAH,kBAAZD,CAAAA,YAAY,0CAAlB,CAKA,GAAIJ,OAAO,EAAIE,eAAX,EAA8BD,eAAlC,CAAmD,CACjDG,YAAY,GACb,CACF,CATQ,CASN,CAACJ,OAAD,CAAUE,eAAV,CAA2BD,eAA3B,CAA4CE,WAA5C,CAAyDN,aAAzD,CATM,CAAT,CAWA,MAAOC,CAAAA,OAAP,CACD,CAnBD,CAqBA,MAAO,IAAMQ,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,gBACLtB,QAAQ,CAAC,GAAIG,CAAAA,SAAJ,CAAc,CAAd,CAAD,CADH,yCAC5BoB,OAD4B,eACnBC,UADmB,eAEnC,GAAMN,CAAAA,eAAe,CAAGd,UAAU,EAAlC,CAFmC,iBAGXE,UAAU,EAHC,CAG3Ba,WAH2B,cAG3BA,WAH2B,CAKnClB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,YAAY,2FAAG,uKACDb,CAAAA,eAAe,CAACW,eAAD,CADd,QACbG,GADa,gBAEnBG,UAAU,CAAC,GAAIrB,CAAAA,SAAJ,CAAckB,GAAd,CAAD,CAAV,CAFmB,wDAAH,kBAAZD,CAAAA,YAAY,2CAAlB,CAKA,GAAIF,eAAJ,CAAqB,CACnBE,YAAY,GACb,CACF,CATQ,CASN,CAACF,eAAD,CAAkBC,WAAlB,CATM,CAAT,CAWA,MAAOI,CAAAA,OAAP,CACD,CAjBM,CAmBP,MAAO,IAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,gBACKzB,QAAQ,CAAC,GAAIG,CAAAA,SAAJ,CAAc,CAAd,CAAD,CADb,yCAC1BuB,WAD0B,eACbC,cADa,8BAEO3B,QAAQ,CAAC,KAAD,CAFf,yCAE1B4B,YAF0B,eAEZC,eAFY,kCAGb3B,YAAY,EAHC,CAGzBc,OAHyB,gBAGzBA,OAHyB,CAIjC,GAAMC,CAAAA,eAAe,CAAGZ,gBAAgB,EAAxC,CACA,GAAMa,CAAAA,eAAe,CAAGd,UAAU,EAAlC,CAEA,GAAMgB,CAAAA,YAAY,CAAGrB,WAAW,sEAAC,kJAC/B8B,eAAe,CAAC,IAAD,CAAf,CAD+B,uBAEXrB,CAAAA,aAAa,CAACU,eAAD,CAAkBD,eAAlB,CAAmCD,OAAnC,CAFF,QAEzBc,KAFyB,gBAG/BH,cAAc,CAACG,KAAD,CAAd,CACAD,eAAe,CAAC,KAAD,CAAf,CAJ+B,wDAAD,GAK7B,CAACb,OAAD,CAAUE,eAAV,CAA2BD,eAA3B,CAL6B,CAAhC,CAOAhB,SAAS,CAAC,UAAM,CACd,GAAIe,OAAO,EAAIE,eAAX,EAA8BD,eAAlC,CAAmD,CACjDG,YAAY,GACb,CACF,CAJQ,CAIN,CAACJ,OAAD,CAAUI,YAAV,CAAwBF,eAAxB,CAAyCD,eAAzC,CAJM,CAAT,CAMA,MAAO,CAAEW,YAAY,CAAZA,YAAF,CAAgBF,WAAW,CAAXA,WAAhB,CAAP,CACD,CArBM,CAuBP,MAAO,IAAMK,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,EAAM,gBACK/B,QAAQ,CAAC,CAAC,CAAD,CAAI,CAAJ,CAAO,CAAP,CAAU,CAAV,CAAD,CADb,0CAC9BgC,YAD8B,gBAChBC,iBADgB,gBAErC,GAAMf,CAAAA,eAAe,CAAGd,UAAU,EAAlC,CAFqC,iBAGbE,UAAU,EAHG,CAG7Ba,WAH6B,cAG7BA,WAH6B,CAKrClB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,YAAY,2FAAG,2KACGV,CAAAA,iBAAiB,CAACQ,eAAD,CADpB,QACbK,OADa,gBAEnBU,iBAAiB,CAACV,OAAD,CAAjB,CAFmB,wDAAH,kBAAZH,CAAAA,YAAY,2CAAlB,CAKA,GAAIF,eAAJ,CAAqB,CACnBE,YAAY,GACb,CACF,CATQ,CASN,CAACD,WAAD,CAAcD,eAAd,CAA+Be,iBAA/B,CATM,CAAT,CAWA,MAAOD,CAAAA,YAAP,CACD,CAjBM,CAmBP,MAAO,IAAME,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAACC,OAAD,CAAa,iBACJnC,QAAQ,CAAC,CAAD,CADJ,2CAC3CoC,eAD2C,gBAC1BC,kBAD0B,gBAElD,GAAMnB,CAAAA,eAAe,CAAGd,UAAU,EAAlC,CAFkD,iBAG1BE,UAAU,EAHgB,CAG1Ca,WAH0C,cAG1CA,WAH0C,CAKlDlB,SAAS,CAAC,UAAM,CACd,GAAMmB,CAAAA,YAAY,2FAAG,mLACWX,CAAAA,uBAAuB,CAACS,eAAD,CAAkBiB,OAAlB,CADlC,QACbG,eADa,gBAEnBD,kBAAkB,CAACC,eAAD,CAAlB,CAFmB,wDAAH,kBAAZlB,CAAAA,YAAY,2CAAlB,CAKA,GAAIF,eAAJ,CAAqB,CACnBE,YAAY,GACb,CACF,CATQ,CASN,CAACF,eAAD,CAAkBiB,OAAlB,CAA2BhB,WAA3B,CATM,CAAT,CAWA,MAAOiB,CAAAA,eAAP,CACD,CAjBM,CAmBP,cAAexB,CAAAA,UAAf","sourcesContent":["import { useCallback, useState, useEffect } from 'react'\nimport { useWeb3React } from '@web3-react/core'\nimport BigNumber from 'bignumber.js'\nimport { useLottery, useLotteryTicket } from 'hooks/useContract'\nimport useRefresh from './useRefresh'\nimport {\n  getTotalRewards,\n  getTotalClaim,\n  getMatchingRewardLength,\n  getWinningNumbers,\n  getTickets,\n} from '../utils/lotteryUtils'\n\nconst useTickets = (lotteryNumber = null) => {\n  const [tickets, setTickets] = useState([])\n  const { account } = useWeb3React()\n  const ticketsContract = useLotteryTicket()\n  const lotteryContract = useLottery()\n  const { fastRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchBalance = async () => {\n      const res = await getTickets(lotteryContract, ticketsContract, account, lotteryNumber)\n      setTickets(res)\n    }\n\n    if (account && lotteryContract && ticketsContract) {\n      fetchBalance()\n    }\n  }, [account, lotteryContract, ticketsContract, fastRefresh, lotteryNumber])\n\n  return tickets\n}\n\nexport const useTotalRewards = () => {\n  const [rewards, setRewards] = useState(new BigNumber(0))\n  const lotteryContract = useLottery()\n  const { fastRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchBalance = async () => {\n      const res = await getTotalRewards(lotteryContract)\n      setRewards(new BigNumber(res))\n    }\n\n    if (lotteryContract) {\n      fetchBalance()\n    }\n  }, [lotteryContract, fastRefresh])\n\n  return rewards\n}\n\nexport const useTotalClaim = () => {\n  const [claimAmount, setClaimAmount] = useState(new BigNumber(0))\n  const [claimLoading, setClaimLoading] = useState(false)\n  const { account } = useWeb3React()\n  const ticketsContract = useLotteryTicket()\n  const lotteryContract = useLottery()\n\n  const fetchBalance = useCallback(async () => {\n    setClaimLoading(true)\n    const claim = await getTotalClaim(lotteryContract, ticketsContract, account)\n    setClaimAmount(claim)\n    setClaimLoading(false)\n  }, [account, lotteryContract, ticketsContract])\n\n  useEffect(() => {\n    if (account && lotteryContract && ticketsContract) {\n      fetchBalance()\n    }\n  }, [account, fetchBalance, lotteryContract, ticketsContract])\n\n  return { claimLoading, claimAmount }\n}\n\nexport const useWinningNumbers = () => {\n  const [winngNumbers, setWinningNumbers] = useState([0, 0, 0, 0])\n  const lotteryContract = useLottery()\n  const { fastRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchBalance = async () => {\n      const rewards = await getWinningNumbers(lotteryContract)\n      setWinningNumbers(rewards)\n    }\n\n    if (lotteryContract) {\n      fetchBalance()\n    }\n  }, [fastRefresh, lotteryContract, setWinningNumbers])\n\n  return winngNumbers\n}\n\nexport const useMatchingRewardLength = (numbers) => {\n  const [matchingNumbers, setMatchingNumbers] = useState(0)\n  const lotteryContract = useLottery()\n  const { fastRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchBalance = async () => {\n      const matchedNumbaers = await getMatchingRewardLength(lotteryContract, numbers)\n      setMatchingNumbers(matchedNumbaers)\n    }\n\n    if (lotteryContract) {\n      fetchBalance()\n    }\n  }, [lotteryContract, numbers, fastRefresh])\n\n  return matchingNumbers\n}\n\nexport default useTickets\n"]},"metadata":{},"sourceType":"module"}