{"ast":null,"code":"import getTimePeriods from'utils/getTimePeriods';// lottery draws UTC: 02:00 (10:00 SGT), 14:00 (22:00 SGT)\nvar lotteryDrawHoursUtc=[2,14];var getClosestLotteryHour=function getClosestLotteryHour(currentHour){switch(true){case currentHour<lotteryDrawHoursUtc[0]||currentHour>=lotteryDrawHoursUtc[1]:return lotteryDrawHoursUtc[0];case currentHour<lotteryDrawHoursUtc[1]:return lotteryDrawHoursUtc[1];default:return 0;}};var getNextLotteryDrawTime=function getNextLotteryDrawTime(currentMillis){var date=new Date(currentMillis);var currentHour=date.getUTCHours();var nextLotteryHour=getClosestLotteryHour(currentHour);// next lottery is tomorrow if the next lottery is at 2am UTC...\n// ...and current time is between 02:00am & 23:59pm UTC\nvar nextLotteryIsTomorrow=nextLotteryHour===2&&currentHour>=2&&currentHour<=23;var millisTimeOfNextDraw;if(nextLotteryIsTomorrow){var tomorrow=new Date(currentMillis);var nextDay=tomorrow.getUTCDate()+1;tomorrow.setUTCDate(nextDay);millisTimeOfNextDraw=tomorrow.setUTCHours(nextLotteryHour,0,0,0);}else{millisTimeOfNextDraw=date.setUTCHours(nextLotteryHour,0,0,0);}return millisTimeOfNextDraw;};// @ts-ignore\nvar getNextTicketSaleTime=function getNextTicketSaleTime(currentMillis){return(parseInt(currentMillis/3600000)+1)*3600000;};var hoursAndMinutesString=function hoursAndMinutesString(hours,minutes){return\"\".concat(parseInt(hours),\"h, \").concat(parseInt(minutes),\"m\");};export var getTicketSaleTime=function getTicketSaleTime(currentMillis){var nextTicketSaleTime=getNextTicketSaleTime(currentMillis);var msUntilNextTicketSale=nextTicketSaleTime-currentMillis;var _getTimePeriods=getTimePeriods(msUntilNextTicketSale/1000),minutes=_getTimePeriods.minutes;var _getTimePeriods2=getTimePeriods(msUntilNextTicketSale/1000),hours=_getTimePeriods2.hours;return hoursAndMinutesString(hours,minutes);};export var getLotteryDrawTime=function getLotteryDrawTime(currentMillis){var nextLotteryDrawTime=getNextLotteryDrawTime(currentMillis);var msUntilLotteryDraw=nextLotteryDrawTime-currentMillis;var _getTimePeriods3=getTimePeriods(msUntilLotteryDraw/1000),minutes=_getTimePeriods3.minutes;var _getTimePeriods4=getTimePeriods(msUntilLotteryDraw/1000),hours=_getTimePeriods4.hours;return hoursAndMinutesString(hours,minutes);};export var getTicketSaleStep=function getTicketSaleStep(){return 1/12*100;};export var getLotteryDrawStep=function getLotteryDrawStep(currentMillis){var msBetweenLotteries=43200000;var endTime=getNextLotteryDrawTime(currentMillis);var msUntilLotteryDraw=endTime-currentMillis;var percentageRemaining=msUntilLotteryDraw/msBetweenLotteries*100;return 100-percentageRemaining;};","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/views/Lottery/helpers/CountdownHelpers.ts"],"names":["getTimePeriods","lotteryDrawHoursUtc","getClosestLotteryHour","currentHour","getNextLotteryDrawTime","currentMillis","date","Date","getUTCHours","nextLotteryHour","nextLotteryIsTomorrow","millisTimeOfNextDraw","tomorrow","nextDay","getUTCDate","setUTCDate","setUTCHours","getNextTicketSaleTime","parseInt","hoursAndMinutesString","hours","minutes","getTicketSaleTime","nextTicketSaleTime","msUntilNextTicketSale","getLotteryDrawTime","nextLotteryDrawTime","msUntilLotteryDraw","getTicketSaleStep","getLotteryDrawStep","msBetweenLotteries","endTime","percentageRemaining"],"mappings":"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","sourcesContent":["import getTimePeriods from 'utils/getTimePeriods'\n\n// lottery draws UTC: 02:00 (10:00 SGT), 14:00 (22:00 SGT)\nconst lotteryDrawHoursUtc = [2, 14]\n\nconst getClosestLotteryHour = (currentHour) => {\n  switch (true) {\n    case currentHour < lotteryDrawHoursUtc[0] || currentHour >= lotteryDrawHoursUtc[1]:\n      return lotteryDrawHoursUtc[0]\n    case currentHour < lotteryDrawHoursUtc[1]:\n      return lotteryDrawHoursUtc[1]\n    default:\n      return 0\n  }\n}\n\nconst getNextLotteryDrawTime = (currentMillis) => {\n  const date = new Date(currentMillis)\n  const currentHour = date.getUTCHours()\n  const nextLotteryHour = getClosestLotteryHour(currentHour)\n  // next lottery is tomorrow if the next lottery is at 2am UTC...\n  // ...and current time is between 02:00am & 23:59pm UTC\n  const nextLotteryIsTomorrow = nextLotteryHour === 2 && currentHour >= 2 && currentHour <= 23\n  let millisTimeOfNextDraw\n\n  if (nextLotteryIsTomorrow) {\n    const tomorrow = new Date(currentMillis)\n    const nextDay = tomorrow.getUTCDate() + 1\n    tomorrow.setUTCDate(nextDay)\n    millisTimeOfNextDraw = tomorrow.setUTCHours(nextLotteryHour, 0, 0, 0)\n  } else {\n    millisTimeOfNextDraw = date.setUTCHours(nextLotteryHour, 0, 0, 0)\n  }\n\n  return millisTimeOfNextDraw\n}\n\n// @ts-ignore\nconst getNextTicketSaleTime = (currentMillis) => (parseInt(currentMillis / 3600000) + 1) * 3600000\nconst hoursAndMinutesString = (hours, minutes) => `${parseInt(hours)}h, ${parseInt(minutes)}m`\n\nexport const getTicketSaleTime = (currentMillis): string => {\n  const nextTicketSaleTime = getNextTicketSaleTime(currentMillis)\n  const msUntilNextTicketSale = nextTicketSaleTime - currentMillis\n  const { minutes } = getTimePeriods(msUntilNextTicketSale / 1000)\n  const { hours } = getTimePeriods(msUntilNextTicketSale / 1000)\n  return hoursAndMinutesString(hours, minutes)\n}\n\nexport const getLotteryDrawTime = (currentMillis): string => {\n  const nextLotteryDrawTime = getNextLotteryDrawTime(currentMillis)\n  const msUntilLotteryDraw = nextLotteryDrawTime - currentMillis\n  const { minutes } = getTimePeriods(msUntilLotteryDraw / 1000)\n  const { hours } = getTimePeriods(msUntilLotteryDraw / 1000)\n  return hoursAndMinutesString(hours, minutes)\n}\n\nexport const getTicketSaleStep = () => (1 / 12) * 100\n\nexport const getLotteryDrawStep = (currentMillis) => {\n  const msBetweenLotteries = 43200000\n  const endTime = getNextLotteryDrawTime(currentMillis)\n  const msUntilLotteryDraw = endTime - currentMillis\n  const percentageRemaining = (msUntilLotteryDraw / msBetweenLotteries) * 100\n  return 100 - percentageRemaining\n}\n"]},"metadata":{},"sourceType":"module"}