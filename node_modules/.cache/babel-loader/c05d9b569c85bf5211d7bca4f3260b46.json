{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useCallback,useState}from'react';import{useLotteryApprove}from'./useApprove';export var useApproval=function useApproval(onPresentApprove){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),requestedApproval=_useState2[0],setRequestedApproval=_useState2[1];var _useLotteryApprove=useLotteryApprove(),onApprove=_useLotteryApprove.onApprove;var handleApprove=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var txHash;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setRequestedApproval(true);_context.next=4;return onApprove();case 4:txHash=_context.sent;// user rejected tx or didn't go thru\nif(!txHash){setRequestedApproval(false);}onPresentApprove();_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);})),[onApprove,onPresentApprove]);return{handleApprove:handleApprove,requestedApproval:requestedApproval};};export default useApproval;","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/hooks/useApproval.ts"],"names":["useCallback","useState","useLotteryApprove","useApproval","onPresentApprove","requestedApproval","setRequestedApproval","onApprove","handleApprove","txHash","console","error"],"mappings":"ogBAAA,OAASA,WAAT,CAAsBC,QAAtB,KAAsC,OAAtC,CACA,OAASC,iBAAT,KAAkC,cAAlC,CAEA,MAAO,IAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,gBAAD,CAAkC,eACTH,QAAQ,CAAC,KAAD,CADC,wCACpDI,iBADoD,eACjCC,oBADiC,sCAErCJ,iBAAiB,EAFoB,CAEnDK,SAFmD,oBAEnDA,SAFmD,CAI3D,GAAMC,CAAAA,aAAa,CAAGR,WAAW,sEAAC,8JAE9BM,oBAAoB,CAAC,IAAD,CAApB,CAF8B,sBAGTC,CAAAA,SAAS,EAHA,QAGxBE,MAHwB,eAI9B;AACA,GAAI,CAACA,MAAL,CAAa,CACXH,oBAAoB,CAAC,KAAD,CAApB,CACD,CACDF,gBAAgB,GARc,+EAU9BM,OAAO,CAACC,KAAR,cAV8B,oEAAD,GAY9B,CAACJ,SAAD,CAAYH,gBAAZ,CAZ8B,CAAjC,CAcA,MAAO,CAAEI,aAAa,CAAbA,aAAF,CAAiBH,iBAAiB,CAAjBA,iBAAjB,CAAP,CACD,CAnBM,CAqBP,cAAeF,CAAAA,WAAf","sourcesContent":["import { useCallback, useState } from 'react'\nimport { useLotteryApprove } from './useApprove'\n\nexport const useApproval = (onPresentApprove: () => void) => {\n  const [requestedApproval, setRequestedApproval] = useState(false)\n  const { onApprove } = useLotteryApprove()\n\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true)\n      const txHash = await onApprove()\n      // user rejected tx or didn't go thru\n      if (!txHash) {\n        setRequestedApproval(false)\n      }\n      onPresentApprove()\n    } catch (e) {\n      console.error(e)\n    }\n  }, [onApprove, onPresentApprove])\n\n  return { handleApprove, requestedApproval }\n}\n\nexport default useApproval\n"]},"metadata":{},"sourceType":"module"}