{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useState,useEffect}from'react';import styled from'styled-components';import{Card,CardBody}from'@pancakeswap-libs/uikit';import getLotteryRoundData from'utils/getLotteryRoundData';import useI18n from'hooks/useI18n';import PastLotterySearcher from'./PastLotterySearcher';import PastRoundCard from'./PastRoundCard';import Loading from'../Loading';import useGetRecentLotteryRoundData from'../../hooks/useGetRecentLotteryRoundData';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Wrapper=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n\"])));var StyledCardBody=styled(CardBody)(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  height: 552px; // height of final card\\n\"])));var PastLotteryRoundViewer=function PastLotteryRoundViewer(){var _useState=useState({roundData:null,error:{message:null,type:null},isInitialized:false,isLoading:true}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useGetRecentLotteryR=useGetRecentLotteryRoundData(),initialLotteryData=_useGetRecentLotteryR.data,mostRecentLotteryNumber=_useGetRecentLotteryR.mostRecentLotteryNumber;var TranslateString=useI18n();var roundData=state.roundData,error=state.error,isInitialized=state.isInitialized,isLoading=state.isLoading;useEffect(function(){if(initialLotteryData){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isLoading:false,isInitialized:true,roundData:initialLotteryData});});}},[initialLotteryData,setState]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(lotteryNumber){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{isLoading:true});});getLotteryRoundData(lotteryNumber).then(function(data){if(data.error){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{error:{message:TranslateString(1076,'The lottery number you provided does not exist'),type:'out of range'},isLoading:false,isInitialized:true});});}else{setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{error:{message:null,type:null},roundData:data,isLoading:false,isInitialized:true});});}}).catch(function(){setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{error:{message:TranslateString(1078,'Error fetching data'),type:'api'},isLoading:false,isInitialized:true});});});case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(PastLotterySearcher,{initialLotteryNumber:mostRecentLotteryNumber,onSubmit:handleSubmit}),!isInitialized||isLoading?/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(StyledCardBody,{children:/*#__PURE__*/_jsx(Loading,{})})}):/*#__PURE__*/_jsx(PastRoundCard,{error:error,data:roundData})]});};export default PastLotteryRoundViewer;","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/views/Lottery/components/PastLotteryRoundViewer/index.tsx"],"names":["React","useState","useEffect","styled","Card","CardBody","getLotteryRoundData","useI18n","PastLotterySearcher","PastRoundCard","Loading","useGetRecentLotteryRoundData","Wrapper","div","StyledCardBody","PastLotteryRoundViewer","roundData","error","message","type","isInitialized","isLoading","state","setState","initialLotteryData","data","mostRecentLotteryNumber","TranslateString","prevState","handleSubmit","lotteryNumber","then","catch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Card, CardBody } from '@pancakeswap-libs/uikit'\nimport getLotteryRoundData from 'utils/getLotteryRoundData'\nimport useI18n from 'hooks/useI18n'\nimport PastLotterySearcher from './PastLotterySearcher'\nimport PastRoundCard from './PastRoundCard'\nimport Loading from '../Loading'\nimport useGetRecentLotteryRoundData from '../../hooks/useGetRecentLotteryRoundData'\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`\n\nconst StyledCardBody = styled(CardBody)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 552px; // height of final card\n`\n\nconst PastLotteryRoundViewer = () => {\n  const [state, setState] = useState({\n    roundData: null,\n    error: { message: null, type: null },\n    isInitialized: false,\n    isLoading: true,\n  })\n  const { data: initialLotteryData, mostRecentLotteryNumber } = useGetRecentLotteryRoundData()\n  const TranslateString = useI18n()\n  const { roundData, error, isInitialized, isLoading } = state\n\n  useEffect(() => {\n    if (initialLotteryData) {\n      setState((prevState) => ({ ...prevState, isLoading: false, isInitialized: true, roundData: initialLotteryData }))\n    }\n  }, [initialLotteryData, setState])\n\n  const handleSubmit = async (lotteryNumber: number) => {\n    setState((prevState) => ({\n      ...prevState,\n      isLoading: true,\n    }))\n\n    getLotteryRoundData(lotteryNumber)\n      .then((data) => {\n        if (data.error) {\n          setState((prevState) => ({\n            ...prevState,\n            error: {\n              message: TranslateString(1076, 'The lottery number you provided does not exist'),\n              type: 'out of range',\n            },\n            isLoading: false,\n            isInitialized: true,\n          }))\n        } else {\n          setState((prevState) => ({\n            ...prevState,\n            error: { message: null, type: null },\n            roundData: data,\n            isLoading: false,\n            isInitialized: true,\n          }))\n        }\n      })\n      .catch(() => {\n        setState((prevState) => ({\n          ...prevState,\n          error: { message: TranslateString(1078, 'Error fetching data'), type: 'api' },\n          isLoading: false,\n          isInitialized: true,\n        }))\n      })\n  }\n\n  return (\n    <Wrapper>\n      <PastLotterySearcher initialLotteryNumber={mostRecentLotteryNumber} onSubmit={handleSubmit} />\n      {!isInitialized || isLoading ? (\n        <Card>\n          <StyledCardBody>\n            <Loading />\n          </StyledCardBody>\n        </Card>\n      ) : (\n        <PastRoundCard error={error} data={roundData} />\n      )}\n    </Wrapper>\n  )\n}\n\nexport default PastLotteryRoundViewer\n"]},"metadata":{},"sourceType":"module"}