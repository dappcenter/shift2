{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from'react';import BigNumber from'bignumber.js';import{useWeb3React}from'@web3-react/core';import{getLotteryAddress}from'utils/addressHelpers';import{useCake}from'./useContract';import useRefresh from'./useRefresh';// Retrieve lottery allowance\nexport var useLotteryAllowance=function useLotteryAllowance(){var _useState=useState(new BigNumber(0)),_useState2=_slicedToArray(_useState,2),allowance=_useState2[0],setAllowance=_useState2[1];var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var cakeContract=useCake();var _useRefresh=useRefresh(),fastRefresh=_useRefresh.fastRefresh;useEffect(function(){var fetchAllowance=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return cakeContract.methods.allowance(account,getLotteryAddress()).call();case 2:res=_context.sent;setAllowance(new BigNumber(res));case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchAllowance(){return _ref.apply(this,arguments);};}();if(account){fetchAllowance();}},[account,cakeContract,fastRefresh]);return allowance;};// Retrieve IFO allowance\nexport var useIfoAllowance=function useIfoAllowance(tokenContract,spenderAddress,dependency){var _useWeb3React2=useWeb3React(),account=_useWeb3React2.account;var _useState3=useState(new BigNumber(0)),_useState4=_slicedToArray(_useState3,2),allowance=_useState4[0],setAllowance=_useState4[1];useEffect(function(){var fetch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return tokenContract.methods.allowance(account,spenderAddress).call();case 3:res=_context2.sent;setAllowance(new BigNumber(res));_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function fetch(){return _ref2.apply(this,arguments);};}();fetch();},[account,spenderAddress,tokenContract,dependency]);return allowance;};","map":{"version":3,"sources":["/Users/rp/Desktop/death/LOU10_sourcecode/toModifyFarms/src/hooks/useAllowance.ts"],"names":["useEffect","useState","BigNumber","useWeb3React","getLotteryAddress","useCake","useRefresh","useLotteryAllowance","allowance","setAllowance","account","cakeContract","fastRefresh","fetchAllowance","methods","call","res","useIfoAllowance","tokenContract","spenderAddress","dependency","fetch","console","error"],"mappings":"ogBAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,SAAP,KAAsB,cAAtB,CACA,OAASC,YAAT,KAA6B,kBAA7B,CAEA,OAASC,iBAAT,KAAkC,sBAAlC,CACA,OAASC,OAAT,KAAwB,eAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CAEA;AACA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,eACLN,QAAQ,CAAC,GAAIC,CAAAA,SAAJ,CAAc,CAAd,CAAD,CADH,wCAChCM,SADgC,eACrBC,YADqB,iCAEnBN,YAAY,EAFO,CAE/BO,OAF+B,eAE/BA,OAF+B,CAGvC,GAAMC,CAAAA,YAAY,CAAGN,OAAO,EAA5B,CAHuC,gBAIfC,UAAU,EAJK,CAI/BM,WAJ+B,aAI/BA,WAJ+B,CAMvCZ,SAAS,CAAC,UAAM,CACd,GAAMa,CAAAA,cAAc,0FAAG,iKACHF,CAAAA,YAAY,CAACG,OAAb,CAAqBN,SAArB,CAA+BE,OAA/B,CAAwCN,iBAAiB,EAAzD,EAA6DW,IAA7D,EADG,QACfC,GADe,eAErBP,YAAY,CAAC,GAAIP,CAAAA,SAAJ,CAAcc,GAAd,CAAD,CAAZ,CAFqB,sDAAH,kBAAdH,CAAAA,cAAc,0CAApB,CAKA,GAAIH,OAAJ,CAAa,CACXG,cAAc,GACf,CACF,CATQ,CASN,CAACH,OAAD,CAAUC,YAAV,CAAwBC,WAAxB,CATM,CAAT,CAWA,MAAOJ,CAAAA,SAAP,CACD,CAlBM,CAoBP;AACA,MAAO,IAAMS,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,aAAD,CAA0BC,cAA1B,CAAkDC,UAAlD,CAAkF,oBAC3FjB,YAAY,EAD+E,CACvGO,OADuG,gBACvGA,OADuG,gBAE7ET,QAAQ,CAAC,GAAIC,CAAAA,SAAJ,CAAc,CAAd,CAAD,CAFqE,yCAExGM,SAFwG,eAE7FC,YAF6F,eAI/GT,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,KAAK,2FAAG,wLAEQH,CAAAA,aAAa,CAACJ,OAAd,CAAsBN,SAAtB,CAAgCE,OAAhC,CAAyCS,cAAzC,EAAyDJ,IAAzD,EAFR,QAEJC,GAFI,gBAGVP,YAAY,CAAC,GAAIP,CAAAA,SAAJ,CAAcc,GAAd,CAAD,CAAZ,CAHU,mFAKVM,OAAO,CAACC,KAAR,eALU,sEAAH,kBAALF,CAAAA,KAAK,2CAAX,CAQAA,KAAK,GACN,CAVQ,CAUN,CAACX,OAAD,CAAUS,cAAV,CAA0BD,aAA1B,CAAyCE,UAAzC,CAVM,CAAT,CAYA,MAAOZ,CAAAA,SAAP,CACD,CAjBM","sourcesContent":["import { useEffect, useState } from 'react'\nimport BigNumber from 'bignumber.js'\nimport { useWeb3React } from '@web3-react/core'\nimport { Contract } from 'web3-eth-contract'\nimport { getLotteryAddress } from 'utils/addressHelpers'\nimport { useCake } from './useContract'\nimport useRefresh from './useRefresh'\n\n// Retrieve lottery allowance\nexport const useLotteryAllowance = () => {\n  const [allowance, setAllowance] = useState(new BigNumber(0))\n  const { account } = useWeb3React()\n  const cakeContract = useCake()\n  const { fastRefresh } = useRefresh()\n\n  useEffect(() => {\n    const fetchAllowance = async () => {\n      const res = await cakeContract.methods.allowance(account, getLotteryAddress()).call()\n      setAllowance(new BigNumber(res))\n    }\n\n    if (account) {\n      fetchAllowance()\n    }\n  }, [account, cakeContract, fastRefresh])\n\n  return allowance\n}\n\n// Retrieve IFO allowance\nexport const useIfoAllowance = (tokenContract: Contract, spenderAddress: string, dependency?: any): BigNumber => {\n  const { account } = useWeb3React()\n  const [allowance, setAllowance] = useState(new BigNumber(0))\n\n  useEffect(() => {\n    const fetch = async () => {\n      try {\n        const res = await tokenContract.methods.allowance(account, spenderAddress).call()\n        setAllowance(new BigNumber(res))\n      } catch (e) {\n        console.error(e)\n      }\n    }\n    fetch()\n  }, [account, spenderAddress, tokenContract, dependency])\n\n  return allowance\n}\n"]},"metadata":{},"sourceType":"module"}