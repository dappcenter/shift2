{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rp/Desktop/shift2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rp/Desktop/shift2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useEffect,useMemo}from\"react\";import BigNumber from\"bignumber.js\";import{kebabCase}from\"lodash\";import{useWeb3React}from\"@web3-react/core\";import{toastTypes}from\"@pancakeswap-libs/uikit\";import{useSelector,useDispatch}from\"react-redux\";import{getWeb3NoAccount}from\"utils/web3\";import useRefresh from\"hooks/useRefresh\";import{fetchFarmsPublicDataAsync,fetchPoolsPublicDataAsync,fetchPoolsUserDataAsync,push as pushToast,remove as removeToast,clear as clearToast,setBlock}from\"./actions\";import{fetchProfile}from\"./profile\";import{fetchTeam,fetchTeams}from\"./teams\";import{fetchAchievements}from\"./achievements\";import{fetchPrices}from\"./prices\";import useGetPriceData from\"../components/Menu/getPrice\";var ZERO=new BigNumber(0);export var useFetchPublicData=function useFetchPublicData(){var dispatch=useDispatch();var _useRefresh=useRefresh(),slowRefresh=_useRefresh.slowRefresh;useEffect(function(){dispatch(fetchFarmsPublicDataAsync());dispatch(fetchPoolsPublicDataAsync());},[dispatch,slowRefresh]);useEffect(function(){var web3=getWeb3NoAccount();var interval=setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var blockNumber;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return web3.eth.getBlockNumber();case 2:blockNumber=_context.sent;dispatch(setBlock(blockNumber));case 4:case\"end\":return _context.stop();}}},_callee);})),6000);return function(){return clearInterval(interval);};},[dispatch]);};// Farms\nexport var useFarms=function useFarms(){var farms=useSelector(function(state){return state.farms.data;});return farms;};export var useFarmFromPid=function useFarmFromPid(pid){var farm=useSelector(function(state){return state.farms.data.find(function(f){return f.pid===pid;});});return farm;};export var useFarmFromSymbol=function useFarmFromSymbol(lpSymbol){var farm=useSelector(function(state){return state.farms.data.find(function(f){return f.lpSymbol===lpSymbol;});});return farm;};export var useFarmUser=function useFarmUser(pid){var farm=useFarmFromPid(pid);return{allowance:farm.userData?new BigNumber(farm.userData.allowance):new BigNumber(0),tokenBalance:farm.userData?new BigNumber(farm.userData.tokenBalance):new BigNumber(0),stakedBalance:farm.userData?new BigNumber(farm.userData.stakedBalance):new BigNumber(0),earnings:farm.userData?new BigNumber(farm.userData.earnings):new BigNumber(0)};};// Pools\nexport var usePools=function usePools(account){var _useRefresh2=useRefresh(),fastRefresh=_useRefresh2.fastRefresh;var dispatch=useDispatch();useEffect(function(){if(account){dispatch(fetchPoolsUserDataAsync(account));}},[account,dispatch,fastRefresh]);var pools=useSelector(function(state){return state.pools.data;});return pools;};export var usePoolFromPid=function usePoolFromPid(sousId){var pool=useSelector(function(state){return state.pools.data.find(function(p){return p.sousId===sousId;});});return pool;};// Prices\nexport var usePriceBnbBusd=function usePriceBnbBusd(){// const pid = 2 // BUSD-BNB LP\n// @ts-ignore\nvar priceData=useGetPriceData();// @ts-ignore\nvar priceData2=new BigNumber(priceData);return priceData2;};export var usePriceCakeBusd=function usePriceCakeBusd(){// const pid = 1 // SHIFT-BNB LP\nvar pid=1;// const bnbPriceUSD = usePriceBnbBusd()\nvar priceData=useGetPriceData();// @ts-ignore\npriceData=new BigNumber(priceData);var farm=useFarmFromPid(pid);//  @ts-ignore\nreturn farm.tokenPriceVsQuote?priceData.times(farm.tokenPriceVsQuote):ZERO;};export var usePriceEthBusd=function usePriceEthBusd(){// const pid = 14 // ETH-BNB LP\nvar pid=0;var bnbPriceUSD=usePriceBnbBusd();var farm=useFarmFromPid(pid);return farm.tokenPriceVsQuote?bnbPriceUSD.times(farm.tokenPriceVsQuote):ZERO;};// Toasts\nexport var useToast=function useToast(){var dispatch=useDispatch();var helpers=useMemo(function(){var push=function push(toast){return dispatch(pushToast(toast));};return{toastError:function toastError(title,description){return push({id:kebabCase(title),type:toastTypes.DANGER,title:title,description:description});},toastInfo:function toastInfo(title,description){return push({id:kebabCase(title),type:toastTypes.INFO,title:title,description:description});},toastSuccess:function toastSuccess(title,description){return push({id:kebabCase(title),type:toastTypes.SUCCESS,title:title,description:description});},toastWarning:function toastWarning(title,description){return push({id:kebabCase(title),type:toastTypes.WARNING,title:title,description:description});},push:push,remove:function remove(id){return dispatch(removeToast(id));},clear:function clear(){return dispatch(clearToast());}};},[dispatch]);return helpers;};// Profile\nexport var useFetchProfile=function useFetchProfile(){var _useWeb3React=useWeb3React(),account=_useWeb3React.account;var dispatch=useDispatch();useEffect(function(){dispatch(fetchProfile(account));},[account,dispatch]);};export var useProfile=function useProfile(){var _useSelector=useSelector(function(state){return state.profile;}),isInitialized=_useSelector.isInitialized,isLoading=_useSelector.isLoading,data=_useSelector.data,hasRegistered=_useSelector.hasRegistered;return{profile:data,hasProfile:isInitialized&&hasRegistered,isInitialized:isInitialized,isLoading:isLoading};};// Teams\nexport var useTeam=function useTeam(id){var team=useSelector(function(state){return state.teams.data[id];});var dispatch=useDispatch();useEffect(function(){dispatch(fetchTeam(id));},[id,dispatch]);return team;};export var useTeams=function useTeams(){var _useSelector2=useSelector(function(state){return state.teams;}),isInitialized=_useSelector2.isInitialized,isLoading=_useSelector2.isLoading,data=_useSelector2.data;var dispatch=useDispatch();useEffect(function(){dispatch(fetchTeams());},[dispatch]);return{teams:data,isInitialized:isInitialized,isLoading:isLoading};};// Achievements\nexport var useFetchAchievements=function useFetchAchievements(){var _useWeb3React2=useWeb3React(),account=_useWeb3React2.account;var dispatch=useDispatch();useEffect(function(){if(account){dispatch(fetchAchievements(account));}},[account,dispatch]);};export var useAchievements=function useAchievements(){var achievements=useSelector(function(state){return state.achievements.data;});return achievements;};// Prices\nexport var useFetchPriceList=function useFetchPriceList(){var _useRefresh3=useRefresh(),slowRefresh=_useRefresh3.slowRefresh;var dispatch=useDispatch();useEffect(function(){dispatch(fetchPrices());},[dispatch,slowRefresh]);};export var useGetApiPrices=function useGetApiPrices(){var prices=useSelector(function(state){return state.prices.data;});return prices;};export var useGetApiPrice=function useGetApiPrice(token){var prices=useGetApiPrices();if(!prices){return null;}return prices[token.toLowerCase()];};// Block\nexport var useBlock=function useBlock(){return useSelector(function(state){return state.block;});};","map":{"version":3,"sources":["/Users/rp/Desktop/shift2/src/state/hooks.ts"],"names":["useEffect","useMemo","BigNumber","kebabCase","useWeb3React","toastTypes","useSelector","useDispatch","getWeb3NoAccount","useRefresh","fetchFarmsPublicDataAsync","fetchPoolsPublicDataAsync","fetchPoolsUserDataAsync","push","pushToast","remove","removeToast","clear","clearToast","setBlock","fetchProfile","fetchTeam","fetchTeams","fetchAchievements","fetchPrices","useGetPriceData","ZERO","useFetchPublicData","dispatch","slowRefresh","web3","interval","setInterval","eth","getBlockNumber","blockNumber","clearInterval","useFarms","farms","state","data","useFarmFromPid","pid","farm","find","f","useFarmFromSymbol","lpSymbol","useFarmUser","allowance","userData","tokenBalance","stakedBalance","earnings","usePools","account","fastRefresh","pools","usePoolFromPid","sousId","pool","p","usePriceBnbBusd","priceData","priceData2","usePriceCakeBusd","tokenPriceVsQuote","times","usePriceEthBusd","bnbPriceUSD","useToast","helpers","toast","toastError","title","description","id","type","DANGER","toastInfo","INFO","toastSuccess","SUCCESS","toastWarning","WARNING","useFetchProfile","useProfile","profile","isInitialized","isLoading","hasRegistered","hasProfile","useTeam","team","teams","useTeams","useFetchAchievements","useAchievements","achievements","useFetchPriceList","useGetApiPrices","prices","useGetApiPrice","token","toLowerCase","useBlock","block"],"mappings":"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","sourcesContent":["import { useEffect, useMemo } from \"react\";\nimport BigNumber from \"bignumber.js\";\nimport { kebabCase } from \"lodash\";\nimport { useWeb3React } from \"@web3-react/core\";\nimport { Toast, toastTypes } from \"@pancakeswap-libs/uikit\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Team } from \"config/constants/types\";\nimport { getWeb3NoAccount } from \"utils/web3\";\nimport useRefresh from \"hooks/useRefresh\";\nimport {\n  fetchFarmsPublicDataAsync,\n  fetchPoolsPublicDataAsync,\n  fetchPoolsUserDataAsync,\n  push as pushToast,\n  remove as removeToast,\n  clear as clearToast,\n  setBlock,\n} from \"./actions\";\nimport {\n  State,\n  Farm,\n  Pool,\n  Block,\n  ProfileState,\n  TeamsState,\n  AchievementState,\n  PriceState,\n} from \"./types\";\nimport { fetchProfile } from \"./profile\";\nimport { fetchTeam, fetchTeams } from \"./teams\";\nimport { fetchAchievements } from \"./achievements\";\nimport { fetchPrices } from \"./prices\";\nimport useGetPriceData from \"../components/Menu/getPrice\";\n\nconst ZERO = new BigNumber(0);\n\nexport const useFetchPublicData = () => {\n  const dispatch = useDispatch();\n  const { slowRefresh } = useRefresh();\n  useEffect(() => {\n    dispatch(fetchFarmsPublicDataAsync());\n    dispatch(fetchPoolsPublicDataAsync());\n  }, [dispatch, slowRefresh]);\n\n  useEffect(() => {\n    const web3 = getWeb3NoAccount();\n    const interval = setInterval(async () => {\n      const blockNumber = await web3.eth.getBlockNumber();\n      dispatch(setBlock(blockNumber));\n    }, 6000);\n\n    return () => clearInterval(interval);\n  }, [dispatch]);\n};\n\n// Farms\n\nexport const useFarms = (): Farm[] => {\n  const farms = useSelector((state: State) => state.farms.data);\n  return farms;\n};\n\nexport const useFarmFromPid = (pid): Farm => {\n  const farm = useSelector((state: State) =>\n    state.farms.data.find((f) => f.pid === pid)\n  );\n  return farm;\n};\n\nexport const useFarmFromSymbol = (lpSymbol: string): Farm => {\n  const farm = useSelector((state: State) =>\n    state.farms.data.find((f) => f.lpSymbol === lpSymbol)\n  );\n  return farm;\n};\n\nexport const useFarmUser = (pid) => {\n  const farm = useFarmFromPid(pid);\n\n  return {\n    allowance: farm.userData\n      ? new BigNumber(farm.userData.allowance)\n      : new BigNumber(0),\n    tokenBalance: farm.userData\n      ? new BigNumber(farm.userData.tokenBalance)\n      : new BigNumber(0),\n    stakedBalance: farm.userData\n      ? new BigNumber(farm.userData.stakedBalance)\n      : new BigNumber(0),\n    earnings: farm.userData\n      ? new BigNumber(farm.userData.earnings)\n      : new BigNumber(0),\n  };\n};\n\n// Pools\n\nexport const usePools = (account): Pool[] => {\n  const { fastRefresh } = useRefresh();\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (account) {\n      dispatch(fetchPoolsUserDataAsync(account));\n    }\n  }, [account, dispatch, fastRefresh]);\n\n  const pools = useSelector((state: State) => state.pools.data);\n  return pools;\n};\n\nexport const usePoolFromPid = (sousId): Pool => {\n  const pool = useSelector((state: State) =>\n    state.pools.data.find((p) => p.sousId === sousId)\n  );\n  return pool;\n};\n\n// Prices\n\nexport const usePriceBnbBusd = (): BigNumber => {\n  // const pid = 2 // BUSD-BNB LP\n  // @ts-ignore\n  const priceData = useGetPriceData();\n\n  // @ts-ignore\n  const priceData2 = new BigNumber(priceData);\n\n  return priceData2;\n};\n\nexport const usePriceCakeBusd = (): BigNumber => {\n  // const pid = 1 // SHIFT-BNB LP\n  const pid = 1;\n  // const bnbPriceUSD = usePriceBnbBusd()\n\n  let priceData = useGetPriceData();\n\n  // @ts-ignore\n  priceData = new BigNumber(priceData);\n\n  const farm = useFarmFromPid(pid);\n\n  //  @ts-ignore\n  return farm.tokenPriceVsQuote\n    ? priceData.times(farm.tokenPriceVsQuote)\n    : ZERO;\n};\n\nexport const usePriceEthBusd = (): BigNumber => {\n  // const pid = 14 // ETH-BNB LP\n  const pid = 0;\n  const bnbPriceUSD = usePriceBnbBusd();\n  const farm = useFarmFromPid(pid);\n  return farm.tokenPriceVsQuote\n    ? bnbPriceUSD.times(farm.tokenPriceVsQuote)\n    : ZERO;\n};\n\n// Toasts\nexport const useToast = () => {\n  const dispatch = useDispatch();\n  const helpers = useMemo(() => {\n    const push = (toast: Toast) => dispatch(pushToast(toast));\n\n    return {\n      toastError: (title: string, description?: string) => {\n        return push({\n          id: kebabCase(title),\n          type: toastTypes.DANGER,\n          title,\n          description,\n        });\n      },\n      toastInfo: (title: string, description?: string) => {\n        return push({\n          id: kebabCase(title),\n          type: toastTypes.INFO,\n          title,\n          description,\n        });\n      },\n      toastSuccess: (title: string, description?: string) => {\n        return push({\n          id: kebabCase(title),\n          type: toastTypes.SUCCESS,\n          title,\n          description,\n        });\n      },\n      toastWarning: (title: string, description?: string) => {\n        return push({\n          id: kebabCase(title),\n          type: toastTypes.WARNING,\n          title,\n          description,\n        });\n      },\n      push,\n      remove: (id: string) => dispatch(removeToast(id)),\n      clear: () => dispatch(clearToast()),\n    };\n  }, [dispatch]);\n\n  return helpers;\n};\n\n// Profile\n\nexport const useFetchProfile = () => {\n  const { account } = useWeb3React();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchProfile(account));\n  }, [account, dispatch]);\n};\n\nexport const useProfile = () => {\n  const {\n    isInitialized,\n    isLoading,\n    data,\n    hasRegistered,\n  }: ProfileState = useSelector((state: State) => state.profile);\n  return {\n    profile: data,\n    hasProfile: isInitialized && hasRegistered,\n    isInitialized,\n    isLoading,\n  };\n};\n\n// Teams\n\nexport const useTeam = (id: number) => {\n  const team: Team = useSelector((state: State) => state.teams.data[id]);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchTeam(id));\n  }, [id, dispatch]);\n\n  return team;\n};\n\nexport const useTeams = () => {\n  const { isInitialized, isLoading, data }: TeamsState = useSelector(\n    (state: State) => state.teams\n  );\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchTeams());\n  }, [dispatch]);\n\n  return { teams: data, isInitialized, isLoading };\n};\n\n// Achievements\n\nexport const useFetchAchievements = () => {\n  const { account } = useWeb3React();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    if (account) {\n      dispatch(fetchAchievements(account));\n    }\n  }, [account, dispatch]);\n};\n\nexport const useAchievements = () => {\n  const achievements: AchievementState[\"data\"] = useSelector(\n    (state: State) => state.achievements.data\n  );\n  return achievements;\n};\n\n// Prices\nexport const useFetchPriceList = () => {\n  const { slowRefresh } = useRefresh();\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(fetchPrices());\n  }, [dispatch, slowRefresh]);\n};\n\nexport const useGetApiPrices = () => {\n  const prices: PriceState[\"data\"] = useSelector(\n    (state: State) => state.prices.data\n  );\n  return prices;\n};\n\nexport const useGetApiPrice = (token: string) => {\n  const prices = useGetApiPrices();\n\n  if (!prices) {\n    return null;\n  }\n\n  return prices[token.toLowerCase()];\n};\n\n// Block\nexport const useBlock = (): Block => {\n  return useSelector((state: State) => state.block);\n};\n"]},"metadata":{},"sourceType":"module"}